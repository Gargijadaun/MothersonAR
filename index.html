<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>WebAR Video Player</title>
   <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    

    <style>
      #overlay {
        position: absolute;
        width: 100%;
        bottom: 10px;
        display: flex;
        justify-content: center;
        z-index: 1;
      }
      .vid-btn {
        padding: 10px 15px;
        margin: 0 5px;
        font-size: 16px;
        background: rgba(0, 0, 0, 0.6);
        color: white;
        border: none;
        border-radius: 5px;
      }
    </style>
  </head>

  <body>
    <!-- ðŸŽ¯ Video element -->
    <video
      id="video"
      playsinline
      crossorigin="anonymous"
      webkit-playsinline
      loop
      style="display:none"
    >
      <source src="./video/Video1.mp4" type="video/mp4" />
    </video>

    <!-- ðŸ§  On-screen video control -->
    <div id="overlay">
      <button class="vid-btn" onclick="changeVideo('./video/Video1.mp4')">Video 1</button>
      <button class="vid-btn" onclick="changeVideo('./video/Video2.mp4')">Video 2</button>
      <button class="vid-btn" onclick="changeVideo('./video/Video3.mp4')">Video 3</button>
      <button class="vid-btn" onclick="changeVideo('./video/Video4.mp4')">Video 4</button>
      <button class="vid-btn" onclick="changeVideo('./video/Video5.mp4')">Video 5</button>
    </div>

    <!-- ðŸ“· AR Scene -->
  <a-scene
  webxr="requiredFeatures: hit-test; optionalFeatures: dom-overlay"
  xr-dom-overlay="root: #overlay"
  vr-mode-ui="enabled: false"
  embedded
>
  <!-- Camera -->
  <a-entity camera look-controls></a-entity>

  <!-- Video Plane -->
  <a-plane
    id="videoPlane"
    width="1.6"
    height="0.9"
    visible="false"
    material="shader: flat; src: #video"
  ></a-plane>

  <!-- Light -->
  <a-light type="directional" intensity="1" position="1 1 0"></a-light>
</a-scene>


    <!-- ðŸ§  Logic -->
    <script>
      const videoPlane = document.getElementById("videoPlane");
const videoElement = document.getElementById("video");
let hasPlaced = false;

document.querySelector("a-scene").addEventListener("click", (e) => {
  if (hasPlaced) return;

  const xrFrame = e.detail && e.detail.frame;
  const refSpace = e.detail && e.detail.referenceSpace;
  const viewerPose = xrFrame && xrFrame.getViewerPose(refSpace);

  if (viewerPose) {
    const pos = viewerPose.transform.position;
    videoPlane.setAttribute("position", `${pos.x} ${pos.y} ${pos.z - 1}`);
    videoPlane.setAttribute("visible", true);
    videoElement.play();
    hasPlaced = true;
  }
});


      // ðŸ” Change video from button
      function changeVideo(src) {
        videoElement.pause();
        videoElement.src = src;
        videoElement.load();
        videoElement.play();
        videoPlane.setAttribute("material", "src", "#video");
      }
       document.querySelector('a-scene').addEventListener('loaded', () => {
    if (!navigator.xr) {
      alert('WebXR not supported on this browser/device');
    }
  });
    </script>
  </body>
</html>
